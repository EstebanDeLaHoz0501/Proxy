#extends Control 
#
#func _ready():
	# Verificamos si existe el nodo antes de intentar usarlo
	#if not has_node("cortinanegra"):
		#print("ERROR: No encuentro el nodo 'cortinanegra'. Revisa el nombre.")
		#return

	## 1. Aseguramos que la cortina negra sea transparente al inicio
	#$cortinanegra.modulate.a = 0.0
	#
	## Aseguramos que el ColorRect sea visible (visible = true) aunque sea transparente
	#$cortinanegra.visible = true 
	
	# sonido
	#if has_node("jumpscare"):
		#$jumpscare.play()
	#else:
		#print("Advertencia: No encuentro el nodo de audio 'jumpscare'")
	
	## fade out
	#print("Iniciando fundido...")
	#iniciar_fundido_negro()

#func iniciar_fundido_negro():
	## Creamos el Tween
	#var tween = get_tree().create_tween()
	#
	## Animamos la propiedad alpha a 1.0 (totalmente opaco) en 3 segundos
	#tween.tween_property($cortinanegra, "modulate:a", 1.0, 3.0)
	#
	## Esperamos a que termine
	#await tween.finished
	#
	#print("Fundido terminado. Cambiando escena...")
	
	# 5. Cambiamos al Menú Principal
	# Asegúrate de que la ruta sea EXACTA. Si escribes mal la ruta, dará error.
	#var cambio = get_tree().change_scene_to_file("res://scenes/ui/menu.tscn")
	#
	#if cambio != OK:
		#print("ERROR: No se pudo cargar la escena del menú. Revisa la ruta 'res://scenes/ui/menu.tscn'")
		





extends Control

func _ready():
	print("--- INICIANDO JUMPSCARE ---")
	
	# 1. Reproducir sonido
	if has_node("jumpscare"):
		$jumpscare.play()
	else:
		print("ERROR: No encuentro el nodo de audio 'jumpscare'")

	# 2. Esperar 5 segundos (Obligatorio)
	# Esto congela el script aquí por 5 segundos antes de cambiar de escena
	await get_tree().create_timer(5.0).timeout
	
	# 3. Limpieza antes de ir al menú (SOLUCIÓN AL BOTÓN ROTO)
	# A veces el juego se queda pausado o el mouse atrapado, esto lo resetea:
	get_tree().paused = false 
	Input.mouse_mode = Input.MOUSE_MODE_VISIBLE 
	
	# 4. Cambiar al menú
	print("Tiempo cumplido. Volviendo al menú...")
	get_tree().change_scene_to_file("res://scenes/ui/menu.tscn")
