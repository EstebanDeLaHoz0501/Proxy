class_name Worm
extends MalwareBase

func _init(nodo_inicio: NodoRed = null):
	super._init("Worm", nodo_inicio) 
	nodoObjetivo = 4
	# Sobrescribimos propiedades (Velocidad m치s lenta para ser m치s enga침oso)
	velocidad_infeccion = 1# Un 20% m치s lento que el base (1.0)
func conquistar_nodo(delta: float):
	# Usamos la nueva constante de 8 segundos y la velocidad (que ahora existe)
	progreso_conquista += velocidad_infeccion * delta
	
	# 游뚿 Comprobaci칩n de conquista (8 segundos)
	if progreso_conquista >= UMBRAL_CONQUISTA_POR_NIVEL: 
		progreso_conquista -= UMBRAL_CONQUISTA_POR_NIVEL # Restamos los 8 segundos para empezar la cuenta del siguiente nivel
		
		# 2. L칩gica de 4 niveles (0, 1, 2, 3)
		if nodo_actual.nivel_infeccion < 3: # El m치ximo nivel es 3 (Tomado)
			nodo_actual.nivel_infeccion += 1
			print("Nivel de infecci칩n de " + str(nodo_actual.id_numero) + " subi칩 a: " + str(nodo_actual.nivel_infeccion))
			
			if nodo_actual.nivel_infeccion == 3:
				print("춰NODO TOMADO!: " + str(nodo_actual.id_numero))
				if(nodo_actual.es_objetivo_worm):
					CPULOGIC.ConsumoWorm = 2
func volver_a_origen():
	CPULOGIC.ConsumoWorm = 0
	mover_a_nodo(nodo_origen)
